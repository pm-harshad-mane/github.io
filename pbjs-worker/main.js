(()=>{"use strict";const e=Symbol("Comlink.proxy"),t=Symbol("Comlink.endpoint"),n=Symbol("Comlink.releaseProxy"),o=Symbol("Comlink.thrown"),a=e=>"object"==typeof e&&null!==e||"function"==typeof e,r=new Map([["proxy",{canHandle:t=>a(t)&&t[e],serialize(e){const{port1:t,port2:n}=new MessageChannel;return s(e,t),[n,[n]]},deserialize:e=>(e.start(),c(e))}],["throw",{canHandle:e=>a(e)&&o in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function s(e,t=self){t.addEventListener("message",(function n(a){if(!a||!a.data)return;const{id:r,type:c,path:l}=Object.assign({path:[]},a.data),u=(a.data.argumentList||[]).map(f);let d;try{const t=l.slice(0,-1).reduce(((e,t)=>e[t]),e),n=l.reduce(((e,t)=>e[t]),e);switch(c){case 0:d=n;break;case 1:t[l.slice(-1)[0]]=f(a.data.value),d=!0;break;case 2:d=n.apply(t,u);break;case 3:d=w(new n(...u));break;case 4:{const{port1:t,port2:n}=new MessageChannel;s(e,n),d=function(e,t){return g.set(e,t),e}(t,[t])}break;case 5:d=void 0}}catch(e){d={value:e,[o]:0}}Promise.resolve(d).catch((e=>({value:e,[o]:0}))).then((e=>{const[o,a]=p(e);t.postMessage(Object.assign(Object.assign({},o),{id:r}),a),5===c&&(t.removeEventListener("message",n),i(t))}))})),t.start&&t.start()}function i(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function c(e,t){return u(e,[],t)}function l(e){if(e)throw new Error("Proxy has been released and is not useable")}function u(e,o=[],a=function(){}){let r=!1;const s=new Proxy(a,{get(t,a){if(l(r),a===n)return()=>h(e,{type:5,path:o.map((e=>e.toString()))}).then((()=>{i(e),r=!0}));if("then"===a){if(0===o.length)return{then:()=>s};const t=h(e,{type:0,path:o.map((e=>e.toString()))}).then(f);return t.then.bind(t)}return u(e,[...o,a])},set(t,n,a){l(r);const[s,i]=p(a);return h(e,{type:1,path:[...o,n].map((e=>e.toString())),value:s},i).then(f)},apply(n,a,s){l(r);const i=o[o.length-1];if(i===t)return h(e,{type:4}).then(f);if("bind"===i)return u(e,o.slice(0,-1));const[c,g]=d(s);return h(e,{type:2,path:o.map((e=>e.toString())),argumentList:c},g).then(f)},construct(t,n){l(r);const[a,s]=d(n);return h(e,{type:3,path:o.map((e=>e.toString())),argumentList:a},s).then(f)}});return s}function d(e){const t=e.map(p);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const g=new WeakMap;function w(t){return Object.assign(t,{[e]:!0})}function p(e){for(const[t,n]of r)if(n.canHandle(e)){const[o,a]=n.serialize(e);return[{type:3,name:t,value:o},a]}return[{type:0,value:e},g.get(e)||[]]}function f(e){switch(e.type){case 3:return r.get(e.name).deserialize(e.value);case 0:return e.value}}function h(e,t,n){return new Promise((o=>{const a=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),o(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)}))}class m{triggerImagePixelWithUrl(e){(new Image).src=e}getCookie(){return window.document.cookie}setCookie(e){window.document.cookie=e}setLocalStorageItem(e,t){window.localStorage.setItem(e,t)}getLocalStorageItem(e){return window.localStorage.getItem(e)}executePBJSQ(){window.pbjs._executeQ()}}let b;!async function(){console.log("Build: 505");const e=new Worker("worker.js");s(m,e);const t=c(e);b=await new t}(),window.pbjs=window.pbjs||{},window.pbjs={_bids:[],_internalQ:window.pbjs.que&&window.pbjs.que.length&&window.pbjs.que.length>0?window.pbjs.que:[],_Q_executed:!1,_executeQ:function(){window.pbjs._internalQ.forEach((e=>e())),window.pbjs._internalQ=[],window.pbjs._Q_executed=!0},que:{push:function(e){console.log("In TOP-PBJS: que.push",arguments),!1===window.pbjs._Q_executed?window.pbjs._internalQ.push(e):e()}},getConfig:async function(){return console.log("In TOP-PBJS: getConfig",arguments),await b.getConfig(...arguments)},setConfig:async function(){console.log("In TOP-PBJS: setConfig",arguments),await b.setConfig(...arguments)},addAdUnits:async function(){console.log("In TOP-PBJS: addAdUnits",arguments),await b.addAdUnits(...arguments)},requestBids:async function(e){console.log("In TOP-PBJS: requestBids",e);let t=e.bidsBackHandler;delete e.bidsBackHandler,await b.requestBids(e,w((function(){console.log("In the callback function, received",arguments),Object.keys(arguments[0]).forEach((e=>{window.pbjs._bids.push(...arguments[0][e].bids)})),t(...arguments)})))},setTargetingForGPTAsync:async function(){console.log("In TOP-PBJS: setTargetingForGPTAsync",arguments),console.log("In TOP-PBJS: setTargetingForGPTAsync, nothing to do for now..");const e=await b.getAdserverTargeting();let t;console.log("In TOP-PBJS: targeting",e);const n=(e,t)=>e.getAdUnitPath()===t||e.getSlotElementId()===t;function o(e){return t=>n(e,t)}let a=window.googletag.pubads().getSlots();a.forEach((n=>{Object.keys(e).filter(t?t(n):o(n)).forEach((t=>Object.keys(e[t]).forEach((o=>{let a=e[t][o];"string"==typeof a&&(a=a.split(",")),a=a.length>1?[a]:a,a.map((e=>e)).forEach((e=>{n.setTargeting(o,e)}))}))))}))},renderAd:function(e,t,n){console.log("In TOP-PBJS, renderAd, arguments:",arguments);const o=window.pbjs._bids.find((e=>e.adId===t));console.log("In TOP-PBJS, renderAd, bid",o),e.write(o.ad),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=o.width,e.defaultView.frameElement.height=o.height)}}})();